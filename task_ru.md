# Практическое задание

**Тема:** Управление прибором по USB CDC с использованием текстовых команд  

---

## Цель

Реализовать на микроконтроллере STM32:

- обмен данными по USB CDC (виртуальный COM-порт);
- простой парсер текстовых команд (по синтаксису похожих на SCPI);
- обработка набора текстовых команд и формирование ответов;
- управление пользовательским светодиодом на плате (ON/OFF + яркость через PWM).

---

## Парсер

### 1. Общее

- Команды приходят как текстовые строки (ASCII).
- Команды и аргументы обрабатываются **без учёта регистра**:  
  `LED ON`, `led on`, `Led On` — это одна и та же команда.
- Конец команды — `\r`, `\n` или `\r\n`.  
  Устройство должно корректно обрабатывать все эти варианты.

---

## Набор команд

### 2.1. Идентификация

- Команда:  
  `*IDN?`  
- Пример ответа:  
  `Eltesta,STM3240G,1234,1.0`

---

### 2.2. Состояние светодиода

- Команды:  
  - `LED ON` / `LED 1` – включить светодиод;  
  - `LED OFF` / `LED 0` – выключить светодиод;  
  - `LED?` – вернуть текущее состояние: `On` или `Off`.

---

### 2.3. Яркость светодиода (PWM)

- Команда установки:  
  `LED:BRIGHT <0..100>` – установить яркость в процентах (0…100 %).  

- Команда запроса:  
  `LED:BRIGHT?` – вернуть текущую яркость (целое число 0…100).

---

## Примечания
(необязательно, по желанию)

- Для обмена командами с микроконтроллером можно использовать терминальный эмулятор **Termite**.
- Для анализа/отладки USB-трафика можно использовать **Wireshark**.
